<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Interview Notes Tool</title>
    <style>
      #logs li:nth-child(odd) {
        background: #F4FAFF;
      }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <script>
    var time = 0;
    var timer;
    var isRunning = false;
    
    function createNote() {
    if (!isRunning) {
      startTimer();
    }
    let note = document.getElementById("m").value.replace(" he ", " TC ").replace(" she ", " TC ").replace(" they ", " TC ");
    let timestamp = document.getElementById("timer").innerHTML;
    if (note.trim() != "") {
      processMessage(timestamp + ": " + note);
    }
      document.getElementById("m").value = "";
      document.getElementById("m").focus();
    };
    
    function processMessage(newLog) {
      var list = document.getElementById('logs');
      var entry = document.createElement('li');
      entry.classList.add("list-group-item")
      entry.appendChild(document.createTextNode(newLog));
      list.appendChild(entry);
    };
    
    function startTimer() {
    isRunning = true;
    timer = setInterval(function() {
        time += 1;
        document.getElementById("timer").innerHTML = String(Math.floor(time / 60)).padStart(2, "0") + ":" + String(time % 60).padStart(2, "0");
      }, 1000);
    };
    
    function pauseTimer() {
      isRunning = false;
      clearInterval(timer);
    };
    
    function resetTimer() {
      time = 0;
      document.getElementById("timer").innerHTML = "00:00";
    };
    
    function copyContents() {
      logs = "";
      parent = document.getElementById("logs");
      for (let child of parent.children) {
        logs += child.innerHTML + "\n";
      }
      navigator.clipboard.writeText(logs);
    };
    
    window.addEventListener("DOMContentLoaded", (event) => {
      function keypress(e) {
        e = e || window.event;
        if (e.keyCode == '13') {
          createNote();
        };
      };
      document.onkeydown = keypress;
    });
  </script>
  <body>
    <div class="container mb-5">
      <div class="page-header fixed-top" style="pointer-events: none;">
        <h1 class="display-1 ms-4">Notey</h1>
      </div>
      <div class="d-flex flex-column" style="height: 90vh">
        <div class="row mt-4">
          <div class="col-lg-1"></div>
          <div class="col-lg-10 center-block text-center">
            <h1 id="timer" class="display-1">00:00</h1>
            <div class="btn-group-lg">
              <button class="btn btn-primary" onClick="startTimer()">Start</button>
              <button class="btn" onClick="pauseTimer()">Pause</button>
              <button class="btn" onClick="resetTimer()">Reset</button>
            </div>
          </div>
          <div class="col-lg-1 align-bottom">
            <button id="copy" class="btn btn-light rounded" onClick="copyContents()">
			  <img src="copy.svg" width=30 height=30/>
			</button>
          </div>
        </div>
        <div class="row mt-4 flex-grow-1" style="overflow-y: scroll;">
          <div class="col-lg center-block">
            <div class="card h-100">
              <ul id="logs" class="list-group"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="input-group fixed-bottom p-2">
      <input class="form-control" id="m" autofocus autocomplete="off" />
      <button class="btn input-gropup-addon" onClick="createNote()">Add Note</button>
    </div>
  </body>
</html>